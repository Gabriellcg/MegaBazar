<!-- order-confirmation.component.html -->
<div class="order-confirmation-container">

  <!-- Banner Promocional -->
  <div class="promo-banner">
    Para frete gr√°tis em pedidos acima de R$100,00 ou mais, use o c√≥digo FRETEFREE
  </div>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <h1 class="logo" [routerLink]="['/']">MegaLoja Online</h1>
        <div class="header-icons">
          <button class="icon-btn">üë§</button>
          <button class="icon-btn" [routerLink]="['/meus-pedidos']" title="Meus Pedidos">üì¶
          </button>
          <button class="icon-btn" [routerLink]="['/carrinho']">üõí</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <div class="container">
      <button class="back-btn" (click)="voltarParaHome()">
        ‚Üê Voltar
      </button>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-container">
    <p>Carregando detalhes do pedido...</p>
  </div>

  <!-- Main Content -->
  <main class="main-content" *ngIf="!loading && pedido">
    <div class="container">

      <!-- T√≠tulo e Status -->
      <div class="success-header">
        <div class="success-icon">‚úì</div>
        <h1 class="page-title">Pedido confirmado</h1>
        <p class="order-number">N√∫mero do Pedido: <strong>{{ pedido.numero }}</strong></p>
        <p class="order-date">Realizado em: {{ formatarData(pedido.data) }}</p>
      </div>

      <!-- Grid Principal -->
      <div class="order-grid">

        <!-- Coluna Esquerda - Detalhes do Pedido -->
        <div class="left-column">

          <!-- Itens do Pedido -->
          <div class="order-section">
            <h2 class="section-title">Itens do pedido</h2>

            <div class="order-items">
              <div class="order-item-card" *ngFor="let item of pedido.itens">
                <div class="item-image">
                  <img [src]="item.imagem" [alt]="item.nome">
                </div>
                <div class="item-details">
                  <h3 class="item-name">{{ item.nome }}</h3>
                  <p class="item-price">R$ {{ formatarPreco(item.preco) }} /un Qtd.</p>
                  <p class="item-quantity">Quantidade: {{ item.quantidade }}</p>
                </div>
                <div class="item-subtotal">
                  <span class="subtotal-label">Subtotal:</span>
                  <span class="subtotal-value">
                    R$ {{ formatarPreco(calcularSubtotalItem(item.preco, item.quantidade)) }}
                  </span>
                </div>
              </div>
            </div>
          </div>

          <!-- A√ß√µes Principais -->
          <div class="action-buttons">
            <button class="btn-primary" (click)="verMaisProdutos()">
              Ver mais produtos
            </button>
            <button class="btn-secondary" (click)="acompanharPedido()">
              Acompanhar pedido
            </button>
            <button class="btn-outline" (click)="verTodosOsPedidos()">
              Voltar para home
            </button>
          </div>

          <!-- Informa√ß√µes Adicionais -->
          <div class="info-box">
            <p class="info-text">
              <strong>Aten√ß√£o:</strong> Confira os detalhes do pedido antes de confirmar.
              Em caso de d√∫vidas, entre em contato conosco.
              Prazo previsto de entrega: <strong>{{ pedido.prazoEntrega }}</strong>.
            </p>
          </div>

        </div>

        <!-- Coluna Direita - Resumo e Detalhes -->
        <div class="right-column">

          <!-- Resumo do Pedido -->
          <div class="summary-card">
            <h3 class="card-title">Quantidade</h3>

            <div class="summary-info">
              <div class="info-item">
                <span class="info-label">Subtotal:</span>
                <span class="info-value">R$ {{ formatarPreco(pedido.subtotal) }}</span>
              </div>

              <div class="info-item">
                <span class="info-label">Frete:</span>
                <span class="info-value" [class.free]="pedido.frete === 0">
                  {{ pedido.frete === 0 ? 'GR√ÅTIS' : 'R$ ' + formatarPreco(pedido.frete) }}
                </span>
              </div>

              <div class="divider"></div>

              <div class="info-item total">
                <span class="info-label">Total:</span>
                <span class="info-value">R$ {{ formatarPreco(pedido.total) }}</span>
              </div>
            </div>

            <div class="delivery-estimate">
              <p><strong>Entrega estimada:</strong></p>
              <p>{{ pedido.prazoEntrega }}</p>
            </div>
          </div>

          <!-- Endere√ßo de Entrega -->
          <div class="address-card">
            <h3 class="card-title">Endere√ßo de entrega</h3>
            <div class="address-content">
              <p><strong>{{ pedido.endereco.logradouro }}, {{ pedido.endereco.numero }}</strong></p>
              <p *ngIf="pedido.endereco.complemento">{{ pedido.endereco.complemento }}</p>
              <p>{{ pedido.endereco.bairro }}</p>
              <p>{{ pedido.endereco.cidade }} - {{ pedido.endereco.estado }}</p>
              <p>CEP: {{ pedido.endereco.cep }}</p>
            </div>
          </div>

          <!-- Forma de Pagamento -->
          <div class="payment-card">
            <h3 class="card-title">Forma de pagamento</h3>
            <div class="payment-content">
              <p><strong>{{ pedido.formaPagamento }}</strong></p>
              <p class="payment-status">Aguardando confirma√ß√£o</p>
            </div>
          </div>

          <!-- Timeline de Entrega -->
          <div class="timeline-card">
            <h3 class="card-title">Status do pedido</h3>
            <div class="timeline">
              <div class="timeline-item active">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <p class="timeline-title">Pedido realizado</p>
                  <p class="timeline-date">Agora</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <p class="timeline-title">Pagamento confirmado</p>
                  <p class="timeline-date">Em breve</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <p class="timeline-title">Em separa√ß√£o</p>
                  <p class="timeline-date">Em breve</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <p class="timeline-title">Em transporte</p>
                  <p class="timeline-date">Em breve</p>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <p class="timeline-title">Entregue</p>
                  <p class="timeline-date">Previs√£o: {{ pedido.prazoEntrega }}</p>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

    </div>
  </main>

  <!-- Caso n√£o tenha pedido -->
  <div *ngIf="!loading && !pedido" class="no-order">
    <div class="container">
      <h2>Nenhum pedido encontrado</h2>
      <p>N√£o foi poss√≠vel carregar os detalhes do pedido.</p>
      <button class="btn-primary" (click)="voltarParaHome()">
        Voltar para home
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-col">
          <h3>Ajuda</h3>
          <ul>
            <li>SAC</li>
            <li>Trocas e devolu√ß√µes</li>
            <li>Meus pedidos</li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>Sobre</h3>
          <ul>
            <li>Sobre n√≥s</li>
            <li>Trabalhe conosco</li>
            <li>Pol√≠tica de Privacidade</li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>Redes Sociais</h3>
          <ul>
            <li>Facebook</li>
            <li>Instagram</li>
            <li>Twitter</li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Formas de pagamento</p>
        <div class="payment-methods">
          üí≥ üè¶ üì± üé´
        </div>
        <p class="copyright">¬© 2024 MegaLoja Online. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

</div>
